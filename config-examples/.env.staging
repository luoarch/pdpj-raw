# Configurações para ambiente de staging/homologação
# Este arquivo contém configurações intermediárias entre desenvolvimento e produção

# Perfil de ambiente - define comportamento automático
PROFILE=staging

# Configurações de ambiente
DEBUG=false
ENVIRONMENT=staging

# Banco de dados - PostgreSQL de staging
DATABASE_URL=postgresql+asyncpg://pdpj_staging_user:staging_password@staging-db.pdpj.gov.br:5432/pdpj_staging

# Redis - instância de staging
REDIS_URL=redis://staging-redis.pdpj.gov.br:6379/0

# AWS S3 - credenciais de staging
AWS_ACCESS_KEY_ID=your_staging_access_key
AWS_SECRET_ACCESS_KEY=your_staging_secret_key
AWS_REGION=us-east-1
S3_BUCKET_NAME=pdpj-documents-staging

# API PDPJ - token de staging
PDPJ_API_BASE_URL=https://api-staging.pdpj.gov.br
PDPJ_API_TOKEN=your_staging_pdpj_token

# Segurança - chaves de staging
SECRET_KEY=staging-secret-key-change-before-production
API_KEY_HEADER=X-API-Key

# Rate Limiting - habilitado com limites intermediários
ENABLE_RATE_LIMITING=true
RATE_LIMIT_REQUESTS=500
RATE_LIMIT_WINDOW=60

# Cache - TTL intermediário para staging
CACHE_TTL=1800

# Logging - nível informativo para staging
LOG_LEVEL=INFO
LOG_FILE=logs/app-staging.log

# Celery - broker de staging
CELERY_BROKER_URL=redis://staging-redis.pdpj.gov.br:6379/1
CELERY_RESULT_BACKEND=redis://staging-redis.pdpj.gov.br:6379/1

# Performance HTTP - configurações intermediárias
MAX_CONCURRENT_REQUESTS=75
MAX_CONCURRENT_DOWNLOADS=40
MAX_CONNECTIONS_PER_HOST=75
CONNECTION_POOL_SIZE=150
KEEPALIVE_TIMEOUT=30
REQUEST_TIMEOUT=60
DOWNLOAD_TIMEOUT=300

# Compressão - habilitada para staging
ENABLE_GZIP_COMPRESSION=true
GZIP_MINIMUM_SIZE=1000
HTTP2_ENABLED=true
TCP_NODELAY=true
TCP_KEEPALIVE=true

# Workers - configurações intermediárias
UVICORN_WORKERS=2
CELERY_WORKERS=3

# Redis otimizado - configurações intermediárias
REDIS_MAX_CONNECTIONS=75
REDIS_RETRY_ON_TIMEOUT=true
REDIS_SOCKET_KEEPALIVE=true

# Bulk operations - tamanhos intermediários
BULK_BATCH_SIZE=500
BULK_INSERT_CHUNK_SIZE=250

# CORS - restritivo para staging
CORS_ORIGINS=["https://staging.pdpj.gov.br", "https://app-staging.pdpj.gov.br"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "OPTIONS", "PATCH"]
CORS_ALLOW_HEADERS=["Content-Type", "Authorization", "X-API-Key"]

# API - configurações de staging
API_PREFIX=/api/v1
API_TITLE=PDPJ Process API - Staging
API_DESCRIPTION=API para consulta e armazenamento de processos judiciais via PDPJ - Ambiente de Staging
API_VERSION=2.0.0-staging

# Segurança - configurações intermediárias
ENABLE_HTTPS_REDIRECT=true
ENABLE_SECURITY_HEADERS=true
ENABLE_TRUSTED_HOST=true
ENABLE_GLOBAL_EXCEPTION_HANDLER=true

# Logging avançado
LOG_REQUEST_ID=true
LOG_FORMAT="{time:YYYY-MM-DD HH:mm:ss} | {level} | {name}:{function}:{line} | {message}"
LOG_ROTATION_SIZE=50 MB
LOG_RETENTION_DAYS=14

# Health check
HEALTH_CHECK_INCLUDE_VERSION=true
HEALTH_CHECK_INCLUDE_TIMESTAMP=true

# Cache - crítico para staging
CACHE_CRITICAL=true

# Observabilidade - habilitada para staging
ENABLE_METRICS=true
METRICS_PATH=/metrics
METRICS_PROTECTED=false
METRICS_CACHE_TTL=30

ENABLE_TRACING=true
TRACING_SAMPLE_RATE=0.2
TRACING_PROVIDER=opentelemetry
TRACING_SERVICE_NAME=pdpj-api-staging
TRACING_SERVICE_VERSION=2.0.0-staging

# Monitoramento externo - configurado para staging
SENTRY_DSN=your_staging_sentry_dsn
# DATADOG_API_KEY=your_staging_datadog_key
# NEWRELIC_LICENSE_KEY=your_staging_newrelic_key
# HONEYCOMB_API_KEY=your_staging_honeycomb_key

# Logging avançado - habilitado para staging
LOG_INCLUDE_USER_ID=true
LOG_INCLUDE_TRACE_ID=true
